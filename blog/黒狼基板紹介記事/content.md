##### 公開:2023/07/23 更新:2023/07/23 writer:a_sa_hi([@asahi_robocuper](https://twitter.com/asahi_robocuper))
---
<br>

# ２０２４シーズン機体基板紹介

<br>
<img src="title.png" class="postpic"> 
<br>

## 初めに
---
どうも抹茶です～～。<br>
自分の書いてる記事の９割は基板紹介な気がするんですが、今回も基板紹介をやっていきたいと思います。<br>
今回紹介する基板は2024シーズンの全国大会機体になるロボの基板ですね。<br>
にしても今年は高校生になってから初めてのシーズン。去年は成績低くても卒業ができたので一年に６機体くらいロボットを作ってましたが、
高校はそうもいかない上に色々あってまだ1機体も作れてない状況...　
高校って思ったより大変。頑張ります。<br>
では余談はここまでにして基板の紹介に入っていきたいと思います〜
<br>
<br>

## スポンサー
---
んと、その前に、いつも同様に今記事で紹介する基板はスポンサーのJLCPCB様に格安で製造を行っていただいています。<br>
また、今は新規ユーザーは＄54のクーポンがもらえるので是非JLCPCBを利用してみてください！！<br>
詳しくは[こちら](https://jlcpcb.com/JPV)をのぞいてみてください！
また、基板の発注方法は[こちら](https://munako-artemis.github.io/blog/20221230/index.html)で以前解説しているのでぜひ覗いてみてください！！
<br>
<br>

## メイン基板
---
<img src="1.JPG" class="postpic"> 
<br>
ロボットの全基板の中で一番大きいものになっていて、場所は上から見て左側に実装されています。<br>
実装されている部品は、<br>
<br>
　メインマイコン：Teensy4.0<br>
　サブマイコン　：M5Stick-C　（ジャイロ用）<br>
　　　　　　　　：Seeeduino Xiao　（MD制御）<br>
　サブジャイロ　：L3GD20H<br>
　モタドラ　　　：VNH2SP30＊3<br>
<br>
が搭載されてます。<br>
一応Stick-CをIMUとして搭載してますが、まだ動作に確証を得てない状態で設計したのでバックアップ用に以前から使ってるL3GD20Hも搭載できるようになっています。
<br>
<img src="2.JPG" class="postpic"> 
<br>
シルクも、去年の基板は失敗しまくりだったので写真のように結構手をかけました。
コンセプトとしては”設計をしてないメンバーでも配線の修理などができる基板”なので配線をいじるであろう所はシルクで何のピンなのかを書いてます。<br>
でもイラストレータなどが使えるわけではいので、KiCadの機能だけでできる最大限のシルク入れをした感じですね。。<br>
イラストレータ使えるようになって、かっこいいシルクが入った基板を作りたい...
<br>
<br>

## IO基板
---
<img src="3.JPG" class="postpic"> 
<br>
こいつは後ろに乗ってるデバック？モード操作？用の基板ですね。<br>
スタート時用のスイッチ、LCD操作用のスイッチ３つと、臨時で使えるインジケータ用のWS2812Bが載ってます。<br>
去年はIO基板にマイコンの書き込み口を作って動かなかったので今年はそんなバカなことはしてないですね。<br>
（去年は何を考えてたのか。。）
<br>
<br>

## センサ基板
---
<img src="4.JPG" class="postpic"> 
<br>
これはロボット上部に搭載されてるIRセンサ16個の処理と、カメラ、LCDの搭載をするための基板です。<br>
IRセンサは16個をマルチプレクサを通してSeeeduino Xiaoで処理してます。データはUARTでメインマイコンに送信してます。<br>
カメラは特に何もしてないですね。取りたい色の角度や距離のデータをメインマイコンに送ってるだけです。<br>
LCDはデバック性がめちゃくちゃに向上し、調整中の扱いやすさ、不具合の発見にめっちゃ役立ってるので結構おすすめです！<br>
ネオピはもちろんロマンです。これがないと物足りん.....ってことで32個搭載しました（？）<br>
<br>
<img src="5.JPG" class="postpic"> 
<br>
余談ですが、ネオピは明るさを落とさないと思ったより電流を食うので制御用電源からではなく、別で12vを持ってきて直前でLDOで5vに降圧したのを供給してます。
MAX輝度で一個あたり50mAほど食うので32個で1600mA。輝度は落とすのでおそらく1.5A用のLDOで耐えられるかと思ってます。
<br>
<br>

## キッカー基板
---
<img src="6.JPG" class="postpic"> 
<br>
キッカーの制御基板も特に何の変哲もないですね。。<br>
コンデンサの容量が3300μFを２つ。FETは回路遮断用にPchMOSFET、ソレノイド制御にNchMOSFETを使用してます。<br>
絶対に必要ないですが、ロマン主義なのでFETは60〜70Aまで流せるバケモンを載せてます。（（パワエレ最高！！<br>
ついでにタッチセンサ？ホールドセンサ？（人によって宗派が違う）もこの基板に接続するようにしていて、配線がごちゃらないようにしてます。
<br>
<br>

## ラインセンサ
---
<img src="6.JPG" class="postpic"> 
<br>
次にラインセンサですね。。形からわかるようにゴミなのは知ってます。（（知った上でしょうがなく設計した<br>
この短い基板にセンサが5個乗るようになっていて、1chずつデータをとってます。
ですが欠陥として、短いのでおそらくラインに3~5cmほど侵入しないと反応しない設計になってますね。こりゃダメだ〜〜ってなればさらに外側に追加で搭載します。
<br>
<br>

## ライン処理用基板
---
<img src="6.JPG" class="postpic"> 
<br>
そしてさっきのラインセンサに引き続き、こいつがライン処理用の基板ですね。<br>
このちっさい基板にSeeduino Xiao、16chマルチプレクサ、各コネクタ用のパッドが付いてます。（これで２層基板）<br>
まぁ、当たり前ですがこんなに小さい基板に収めようとするのは間違いですね。。自分の場合、場所的な問題でこの形しかできなかったですが、場所はとってあげるべきですね...
<br>
<br>

## 電源基板
---
<img src="6.JPG" class="postpic"> 
<br>
最後に電源基盤ですね。（（こう見ると案外今回発注した基板の数多いな<br>
電源まわりの設計は比較的得意？で燃えたことはないです。<br>
　※一回電流に耐えられず、パターンがフューズとして焼き切れてしまったことはある<br>
バッテリーからの電源を保護回路を通してモタドラ、ESCに送り、DCDCコンバータで5vに降圧したものをを制御用電源として使ってます。
それに加えて今年は３輪というのもあって電源基板に昇圧回路を乗せて48v（理論値）を生成してキッカー用に吐き出してます。
DCDCは村田製作所さんの"OKL-T/6-W12N-C"、昇圧回路はXL6009を使用して約48vを生成してます。
<br>
<br>

## 最後に
---
ここまで読んでくださってありがとうございます。毎回毎回、基板紹介の記事で申し訳ございません、、<br>
そろそろ基板じゃなくて、自分の設計思想とか、自分の技術についての解説記事とかも書いていきたいですね。<br>
とりあえず早く動くロボットをソフト班に引き渡さないといけないので機体組み立て頑張ります。。<br>
ではここらで～<br>